{"filter":false,"title":"app.py","tooltip":"/app.py","undoManager":{"mark":3,"position":3,"stack":[[{"start":{"row":0,"column":0},"end":{"row":75,"column":21},"action":"insert","lines":["# this is the root python file ","# I built a route that sends song data ","# (fetched from genius) to the page.html templates file","# to use the data dynamically on the page","import requests_oauthlib, requests","from flask import Flask, render_template","import os","import requests","import json","import random","","# app execution name is appli","appli = Flask(__name__)","","# defining authorization header in myheader :)","myheader = {\"Authorization\": \"Bearer eTnvJMtGEvFKJVrj72lNjVZzXgtyE1xD6Q-Unv2A0Amjhgfx-DEo-1oEUnipH87b\"}","","# song id-key","","# 2822805 - crazy dream","# 3555892 - man like you","# 3300945 - movie","# 3555889 - runs through","# 2480970 -watch dance","# 3458461 - water baby","# 2823483 - wish","","song_id=[2822805, 3555892, 3300945, 3555889, 2480970, 3458461, 2823483] # multiple songs to randomly generate","","","# main route, returns .json api data to page.html ","# uses render_template to access page.html","@appli.route(\"/\")","def songdata():","    ","    url = \"https://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=twitterapi&count=2\"","    ","    consumer_key = '3ICZ0C7ojimzEIcikzi1TahJV'","    consumer_secret = 'Ps6IelFUnvmEUk9oqgkrQFfsaLaJG56HRWJCKfOs2n0Lh6OqfJ'","       ","    access_token = '317341733-Mh9eGlPW0Mrr0DRVn0oUc9I3M6jh90PYCjy6lUUa'","    access_token_secret = 'KRTf4ZH4mFzMKQlpRXUhdcbvYblWu5BCAz84j3v4sKCIo'","    ","    oauth = requests_oauthlib.OAuth1(","    consumer_key, ","    consumer_secret,","    access_token,","    access_token_secret","    )","    ","    twitt = requests.get(url, auth=oauth)","    twitt_json = twitt.json()","    twitt_format = json.dumps(twitt.json(), indent=2) ","    ","    choice_num=str(random.choice(song_id))","    ","    # retreiving song api from genius and converting to json","    song = requests.get('https://api.genius.com/songs/' + choice_num + '?text_format=plain', headers=myheader)","    song_json = song.json()","    ","    # just print(song_string) to inspect json data tree","    song_string = json.dumps(song_json, indent=2) ","    ","    return render_template('index.html',","                    choice_num=choice_num,","                    song_art= song_json['response']['song']['song_art_image_url'],","                    song_title = song_json['response']['song']['full_title'],","                    song_lyrics = song_json['response']['song']['embed_content'],","                    artist_photo = song_json['response']['song']['primary_artist']['header_image_url'],","                    artist_link = song_json['response']['song']['primary_artist']['url'],","                    status = twitt_json",")","","appli.run(host=os.getenv('IP', '0.0.0.0'), ","          port=int(os.getenv('PORT', 8080)),","          debug=True)"],"id":1}],[{"start":{"row":4,"column":0},"end":{"row":4,"column":34},"action":"remove","lines":["import requests_oauthlib, requests"],"id":2}],[{"start":{"row":5,"column":40},"end":{"row":6,"column":0},"action":"insert","lines":["",""],"id":3}],[{"start":{"row":6,"column":0},"end":{"row":6,"column":34},"action":"insert","lines":["import requests_oauthlib, requests"],"id":4}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":6,"column":0},"end":{"row":6,"column":34},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1567687435557,"hash":"cf3b084231ef39efa808ba825dba1583430aef1e"}